/* React Flow Theme Integration */

/* Ensure React Flow stays within its container and doesn't cover other elements */
.react-flow {
  position: relative !important;
  z-index: 1;
  width: 100% !important;
  height: 100% !important;
}

.react-flow__renderer {
  position: relative !important;
}

/* Light theme variables */
:root {
  --xy-background-color-default: var(--background);
  --xy-background-pattern-color-default: oklch(from var(--muted-foreground) l c h / 0.1);
  
  /* Controls styling */
  --xy-controls-button-background-color-default: var(--background);
  --xy-controls-button-background-color-hover-default: oklch(from var(--muted) l c h / 0.8);
  --xy-controls-button-color-default: var(--foreground);
  --xy-controls-button-color-hover-default: var(--foreground);
  --xy-controls-button-border-color-default: var(--border);
  --xy-controls-box-shadow-default: 0 1px 3px 0 oklch(from var(--foreground) l c h / 0.1), 0 1px 2px 0 oklch(from var(--foreground) l c h / 0.06);
  
  /* MiniMap styling */
  --xy-minimap-background-color-default: var(--background);
  --xy-minimap-mask-background-color-default: oklch(from var(--muted) l c h / 0.2);
  --xy-minimap-mask-stroke-color-default: var(--border);
  
  /* Node styling */
  --xy-node-background-color-default: var(--card);
  --xy-node-border-default: 1px solid var(--border);
  --xy-node-color-default: var(--card-foreground);
  --xy-node-border-radius-default: 0.5rem;
  --xy-node-boxshadow-hover-default: 0 4px 6px -1px oklch(from var(--foreground) l c h / 0.1), 0 2px 4px -1px oklch(from var(--foreground) l c h / 0.06);
  --xy-node-boxshadow-selected-default: 0 0 0 2px var(--ring);
  
  /* Edge styling */
  --xy-edge-stroke-default: var(--muted-foreground);
  --xy-edge-stroke-width-default: 2;
  --xy-edge-stroke-selected-default: var(--primary);
  
  /* Handle styling */
  --xy-handle-background-color-default: var(--background);
  --xy-handle-border-color-default: var(--primary);
}

/* Dark theme variables */
.dark {
  --xy-background-color-default: var(--background);
  --xy-background-pattern-color-default: oklch(from var(--muted-foreground) l c h / 0.2);
  
  /* Controls styling for dark mode */
  --xy-controls-button-background-color-default: var(--background);
  --xy-controls-button-background-color-hover-default: oklch(from var(--muted) l c h / 0.8);
  --xy-controls-button-color-default: var(--foreground);
  --xy-controls-button-color-hover-default: var(--foreground);
  --xy-controls-button-border-color-default: var(--border);
  --xy-controls-box-shadow-default: 0 1px 3px 0 oklch(from var(--foreground) l c h / 0.1), 0 1px 2px 0 oklch(from var(--foreground) l c h / 0.06);
  
  /* MiniMap styling for dark mode */
  --xy-minimap-background-color-default: var(--background);
  --xy-minimap-mask-background-color-default: oklch(from var(--muted) l c h / 0.3);
  --xy-minimap-mask-stroke-color-default: var(--border);
  
  /* Node styling for dark mode */
  --xy-node-background-color-default: var(--card);
  --xy-node-border-default: 1px solid var(--border);
  --xy-node-color-default: var(--card-foreground);
  --xy-node-boxshadow-hover-default: 0 4px 6px -1px oklch(from var(--foreground) l c h / 0.1), 0 2px 4px -1px oklch(from var(--foreground) l c h / 0.06);
  --xy-node-boxshadow-selected-default: 0 0 0 2px var(--ring);
  
  /* Edge styling for dark mode */
  --xy-edge-stroke-default: var(--muted-foreground);
  --xy-edge-stroke-selected-default: var(--primary);
  
  /* Handle styling for dark mode */
  --xy-handle-background-color-default: var(--background);
  --xy-handle-border-color-default: var(--primary);
}

/* Custom node theming */
.react-flow__node {
  transition: box-shadow 0.2s ease-in-out;
}

.react-flow__node:hover {
  box-shadow: var(--xy-node-boxshadow-hover-default);
}

/* Hide default React Flow selection decorations */
.react-flow__node.selected .react-flow__resize-control,
.react-flow__node.selected .react-flow__resize-control-handle {
  display: none !important;
}

/* Custom edge theming */
.react-flow__edge-path {
  stroke: var(--xy-edge-stroke-default);
  stroke-width: var(--xy-edge-stroke-width-default);
  transition: stroke 0.2s ease-in-out;
}

.react-flow__edge.selected .react-flow__edge-path {
  stroke: var(--xy-edge-stroke-selected-default);
}

/* Handle theming */
.react-flow__handle {
  background: var(--xy-handle-background-color-default);
  border: 2px solid var(--xy-handle-border-color-default);
  transition: all 0.2s ease-in-out;
}

.react-flow__handle:hover {
  transform: scale(1.1);
}

/* Controls theming */
.react-flow__controls {
  background: var(--xy-controls-button-background-color-default);
  border: 1px solid var(--xy-controls-button-border-color-default);
  border-radius: 0.5rem;
  box-shadow: var(--xy-controls-box-shadow-default);
  position: absolute !important;
  z-index: 10 !important;
}

.react-flow__controls-button {
  background: var(--xy-controls-button-background-color-default);
  color: var(--xy-controls-button-color-default);
  border: none;
  border-bottom: 1px solid var(--xy-controls-button-border-color-default);
  transition: background-color 0.2s ease-in-out;
}

.react-flow__controls-button:hover {
  background: var(--xy-controls-button-background-color-hover-default);
  color: var(--xy-controls-button-color-hover-default);
}

.react-flow__controls-button:last-child {
  border-bottom: none;
}

/* MiniMap theming */
.react-flow__minimap {
  background: var(--xy-minimap-background-color-default);
  border: 1px solid var(--xy-controls-button-border-color-default);
  border-radius: 0.5rem;
  box-shadow: var(--xy-controls-box-shadow-default);
  position: absolute !important;
  z-index: 10 !important;
}

.react-flow__minimap-mask {
  fill: var(--xy-minimap-mask-background-color-default);
  stroke: var(--xy-minimap-mask-stroke-color-default);
} 